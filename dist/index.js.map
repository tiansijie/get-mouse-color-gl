{"version":3,"file":null,"sources":["../src/index.js"],"sourcesContent":["let fbo = null;\nfunction readPixelAt(regl, x, y, contents) {\n\tconst width = regl._gl.canvas.clientWidth;\n\tconst height = regl._gl.canvas.clientHeight;\n  if (!fbo) {\n    fbo = regl.framebuffer({\n      width,\n      height,\n      stencil: false\n    });\n  }\n\n  return new Promise(resolve => {\n    if (x < width && y < height) {\n      regl({ framebuffer: fbo })(() => {\n        regl.clear({ color: [ 0, 0, 0, 0 ], depth: 1 });\n        for (let i = 0; i < contents.length; ++i) {\n          contents[i]();\n        }\n        resolve(regl.read({ x, y, width: 1, height: 1 }));\n      });\n    }\n    resolve(null);\n  });\n}\n\n//module.exports = readPixelAt;\nexport default readPixelAt;\n"],"names":["fbo","readPixelAt","regl","x","y","contents","width","_gl","canvas","clientWidth","height","clientHeight","framebuffer","Promise","resolve","clear","color","depth","i","length","read"],"mappings":";;;;;;AAAA,IAAIA,MAAM,IAAV;AACA,SAASC,WAAT,CAAqBC,IAArB,EAA2BC,CAA3B,EAA8BC,CAA9B,EAAiCC,QAAjC,EAA2C;QACpCC,QAAQJ,KAAKK,GAAL,CAASC,MAAT,CAAgBC,WAA9B;QACMC,SAASR,KAAKK,GAAL,CAASC,MAAT,CAAgBG,YAA/B;MACK,CAACX,GAAL,EAAU;UACFE,KAAKU,WAAL,CAAiB;WAAA;YAAA;eAGZ;KAHL,CAAN;;;SAOK,IAAIC,OAAJ,CAAYC,WAAW;QACxBX,IAAIG,KAAJ,IAAaF,IAAIM,MAArB,EAA6B;WACtB,EAAEE,aAAaZ,GAAf,EAAL,EAA2B,MAAM;aAC1Be,KAAL,CAAW,EAAEC,OAAO,CAAE,CAAF,EAAK,CAAL,EAAQ,CAAR,EAAW,CAAX,CAAT,EAAyBC,OAAO,CAAhC,EAAX;aACK,IAAIC,IAAI,CAAb,EAAgBA,IAAIb,SAASc,MAA7B,EAAqC,EAAED,CAAvC,EAA0C;mBAC/BA,CAAT;;gBAEMhB,KAAKkB,IAAL,CAAU,EAAEjB,CAAF,EAAKC,CAAL,EAAQE,OAAO,CAAf,EAAkBI,QAAQ,CAA1B,EAAV,CAAR;OALF;;YAQM,IAAR;GAVK,CAAP;CAcF;;;;"}